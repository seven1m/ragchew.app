<%= erb :_user %>

<p><a href="/">home</a></p>

<header class="flex">
  <div class="header-col-grow">
    <%= erb :_club_breadcrumb, locals: { net: @net } %>

    <h1><%== @net.name %> (<%== @net.id %>)</h1>

    <% if session[:started_net] == @net.name %>
      <form action="/close-net/<%== @net.id %>" method="POST">
        <input type="submit" value="Close net!"/>
      </form>
    <% end %>

    <p>
      <%== @net.frequency %> |
      <%== @net.mode %> |
      <%== @net.band %> |
      started at <%== format_time(@net.started_at) %> |
      <%== @net.host %>
    </p>
  </div>

  <div class="header-col">
    <%= club_logo_image_tag(@net.club) %>
  </div>
</header>

<div data-component="Net" data-props="<%= json_for_html_attribute({ userCallSign: @user.call_sign, netId: @net.id, updateInterval: @update_interval, lastUpdatedAt: @last_updated_at, isLogger: is_logger?, monitoringThisNet: @user.monitoring_net == @net }) %>">
  <p>loading...</p>
</div>

<script type="module" src="/net.js?_ts=<%== File.stat('public/net.js').mtime.to_i %>"></script>

<%= erb :_admin_net_controls %>
