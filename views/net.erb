<% net_info = {
  userCallSign: @user.call_sign,
  club: @net.club&.as_json,
  clubLogo: @net.club&.logo_url,
  clubUrl: @net.club && "/group/#{url_escape(@net.club.name)}",
  net: @net.as_json,
  netId: @net.id,
  updateInterval: @update_interval,
  lastUpdatedAt: @last_updated_at,
  isLogger: @is_logger,
  canLogForClub: @user.can_log_for_club?(@net.club),
  monitoringThisNet: @user.monitoring_net == @net,
  favorites: @favorites,
  favoritedNet: @favorited_net,
  blockedStations: @blocked_stations,
  netBlockedStations: @net_blocked_stations,
  pusher: {
    key: pusher_key,
    cluster: pusher_cluster,
    authEndpoint: "/pusher/auth/#{@net.id}",
    channel: "private-net-#{@net.id}",
  }
} %>

<div data-component="Net" data-props="<%= json_for_html_attribute(net_info) %>">
  <p id="loading">loading...</p>
</div>

<%= erb :_admin_net_controls %>

<script>
  if (typeof buildNetMap === "undefined") {
    const elm = document.getElementById("loading")
    elm.innerHTML = "There was an error loading the JavaScript for this site. Make sure you are using a modern web browser."
    elm.style.color = "red"
  }
</script>
